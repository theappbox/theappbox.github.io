function detectDevice(){var uA=window.navigator.userAgent.toLowerCase();var output={ua:uA,ios:false,android:false,device:"desktop",native:false,nativeVersion:false};if(uA.indexOf("android")>=0){output["device"]="android";output["android"]=true}else if(uA.indexOf("ipad")>=0){output["device"]="ipad";output["ios"]=true}else if(uA.indexOf("ipod")>=0){output["device"]="ipod";output["ios"]=true}else if(uA.indexOf("iphone")>=0){output["device"]="iphone";output["ios"]=true}else if(uA.indexOf("mac")>=0){output["device"]="desktop"}else if(uA.indexOf("windows")>=0){output["device"]="desktop"}if(uA.indexOf("lootvalleyapp")>=0){output["native"]=true;output["nativeVersion"]=uA.match(/(lootvalleyapp\/[0-9\.]{1,4})/im)?uA.match(/(lootvalleyapp\/[0-9\.]{1,4})/im)[0].replace(/lootvalleyapp\//,""):false}else if(uA.indexOf("lootvalley")>=0){output["native"]=true;output["nativeVersion"]=uA.match(/(lootvalley\/[0-9\.]{1,4})/im)?uA.match(/(lootvalley\/[0-9\.]{1,4})/im)[0].replace(/lootvalley\//,""):false}else{output["native"]=false;output["nativeVersion"]=false}return output}function iosNativeCallBack(callbackName,passed){try{window.webkit.messageHandlers[callbackName].postMessage(passed)}catch(err){console.log("Could not call ios")}}function androidNativeCallBack(callbackName,passed){if(window.Android!=undefined&&window.Android[callbackName]!=undefined){window.Android[callbackName](passed)}}function externalLink(url,type){var device=detectDevice();if(device["native"]){switch(type){case"APP":if(device["device"]=="android"){androidNativeCallBack("openWindow",url)}else{iosNativeCallBack("openWindow",url)}break;case"CASHBACK":if(device["device"]=="android"){androidNativeCallBack("openWindow",url)}else{iosNativeCallBack("openWindow",url)}break;case"SURVEY":if(device["device"]=="android"){androidNativeCallBack("openWindow",url)}else{iosNativeCallBack("openSvc",url)}break;case"SOCIAL":if(device["device"]=="android"){androidNativeCallBack("openWindow",url)}else{iosNativeCallBack("openSvc",url)}break;default:if(device["device"]=="android"){androidNativeCallBack("openWindow",url)}else{iosNativeCallBack("openWindow",url)}break}}else{window.open(url,"_blank")}}